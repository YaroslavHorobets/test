let orderObj = {
    "type": "success",
    "mgs": "Order created Successful",
    "order": {
        "userId": "5f20b78f3701d74f3b9c96c4",
        "isThankYouShown": false,
        "totalQuantity": 32,
        "totalPrice": 73028.95199999999,
        "orderItems": [{
                "_id": "60801f85ebba426913b33af3",
                "productId": "6000791d268437a806a8c0bb",
                "quantity": 1,
                "price": 2300,
                "supplier": "Fozzy",
                "supplierId": "5fd8bb0d7b7b9506dd38c008",
                "itemFullName": "wine GILBERT & MOREAU brut white G&M, Cristal Roederer Brut 2009 0.75 FRANCE",
                "itemName": "G&M, Cristal Roederer Brut 2009",
                "country": "FRANCE",
                "countryId": "1ca8816a-a7db-4be0-bc16-2d6e532b8b53",
                "total": 2300,
                "createdAt": "2021-04-21T12:50:13.649Z",
                "updatedAt": "2021-04-21T12:50:13.649Z"
            },
            {
                "_id": "60801f86ebba426913b33af4",
                "productId": "6000791d268437a806a8c0bb",
                "quantity": 1,
                "price": 7809,
                "supplier": "TS Plus",
                "supplierId": "5f8ec4896b08c33fc9f169dd",
                "itemFullName": "wine GILBERT & MOREAU brut white G&M, Cristal Roederer Brut 2009 0.75 FRANCE",
                "itemName": "G&M, Cristal Roederer Brut 2009",
                "country": "FRANCE",
                "countryId": "1ca8816a-a7db-4be0-bc16-2d6e532b8b53",
                "total": 7809,
                "createdAt": "2021-04-21T12:50:14.699Z",
                "updatedAt": "2021-04-21T12:50:14.699Z"
            },
            {
                "_id": "60801f89ebba426913b33af5",
                "productId": "6000791e268437a806a8c0bd",
                "quantity": 5,
                "price": 3000,
                "supplier": "Fozzy",
                "supplierId": "5fd8bb0d7b7b9506dd38c008",
                "itemFullName": "wine GILBERT & MOREAU brut rose G&M, Bollinger Brut Rose 0.75 FRANCE",
                "itemName": "G&M, Bollinger Brut Rose",
                "country": "FRANCE",
                "countryId": "1ca8816a-a7db-4be0-bc16-2d6e532b8b53",
                "total": 15000,
                "createdAt": "2021-04-21T12:50:17.045Z",
                "updatedAt": "2021-04-21T12:50:17.045Z"
            },
            {
                "_id": "60801f89ebba426913b33af6",
                "productId": "6000791e268437a806a8c0bd",
                "quantity": 1,
                "price": 2273.004,
                "supplier": "TS Plus",
                "supplierId": "5f8ec4896b08c33fc9f169dd",
                "itemFullName": "wine GILBERT & MOREAU brut rose G&M, Bollinger Brut Rose 0.75 FRANCE",
                "itemName": "G&M, Bollinger Brut Rose",
                "country": "FRANCE",
                "countryId": "1ca8816a-a7db-4be0-bc16-2d6e532b8b53",
                "total": 2273,
                "createdAt": "2021-04-21T12:50:17.518Z",
                "updatedAt": "2021-04-21T12:50:17.518Z"
            },
            {
                "_id": "60801f8bebba426913b33af7",
                "productId": "6000791e268437a806a8c0c3",
                "quantity": 1,
                "price": 812.496,
                "supplier": "TS Plus",
                "supplierId": "5f8ec4896b08c33fc9f169dd",
                "itemFullName": "wine LANSON INTERNATIONAL DIFFUSION brut white Lanson, Black Label Brut 0,375l 0.375 FRANCE",
                "itemName": "Lanson, Black Label Brut 0,375l",
                "country": "FRANCE",
                "countryId": "1ca8816a-a7db-4be0-bc16-2d6e532b8b53",
                "total": 812,
                "createdAt": "2021-04-21T12:50:19.573Z",
                "updatedAt": "2021-04-21T12:50:19.573Z"
            },
            {
                "_id": "60801f8bebba426913b33af8",
                "productId": "6000791e268437a806a8c0bf",
                "quantity": 1,
                "price": 1775.004,
                "supplier": "TS Plus",
                "supplierId": "5f8ec4896b08c33fc9f169dd",
                "itemFullName": "wine GILBERT & MOREAU brut white G&M, Bollinger Speciale cuvee Brut 0.75 FRANCE",
                "itemName": "G&M, Bollinger Speciale cuvee Brut",
                "country": "FRANCE",
                "countryId": "1ca8816a-a7db-4be0-bc16-2d6e532b8b53",
                "total": 1775,
                "createdAt": "2021-04-21T12:50:19.912Z",
                "updatedAt": "2021-04-21T12:50:19.912Z"
            },
            {
                "_id": "60801f8debba426913b33af9",
                "productId": "6000791e268437a806a8c0cf",
                "quantity": 12,
                "price": 1509.9959999999999,
                "supplier": "TS Plus",
                "supplierId": "5f8ec4896b08c33fc9f169dd",
                "itemFullName": "wine Charles-Heidsieck brut white Charles-Heidsieck, Brut Reserve 0.75 FRANCE",
                "itemName": "Charles-Heidsieck, Brut Reserve",
                "country": "FRANCE",
                "countryId": "1ca8816a-a7db-4be0-bc16-2d6e532b8b53",
                "total": 18119.951999999997,
                "createdAt": "2021-04-21T12:50:21.281Z",
                "updatedAt": "2021-04-21T12:50:21.281Z"
            },
            {
                "_id": "60801f8debba426913b33afa",
                "productId": "6000791e268437a806a8c0cd",
                "quantity": 1,
                "price": 911.0039999999999,
                "supplier": "TS Plus",
                "supplierId": "5f8ec4896b08c33fc9f169dd",
                "itemFullName": "wine LANSON INTERNATIONAL DIFFUSION brut rose Lanson, Rose Label Brut 0,375l 0.375 FRANCE",
                "itemName": "Lanson, Rose Label Brut 0,375l",
                "country": "FRANCE",
                "countryId": "1ca8816a-a7db-4be0-bc16-2d6e532b8b53",
                "total": 911,
                "createdAt": "2021-04-21T12:50:21.702Z",
                "updatedAt": "2021-04-21T12:50:21.702Z"
            },
            {
                "_id": "60801f8eebba426913b33afb",
                "productId": "6000791e268437a806a8c0d3",
                "quantity": 1,
                "price": 2859.9959999999996,
                "supplier": "TS Plus",
                "supplierId": "5f8ec4896b08c33fc9f169dd",
                "itemFullName": "wine Charles-Heidsieck brut white Charles-Heidsieck, Blanc de Blanc 0.75 FRANCE",
                "itemName": "Charles-Heidsieck, Blanc de Blanc",
                "country": "FRANCE",
                "countryId": "1ca8816a-a7db-4be0-bc16-2d6e532b8b53",
                "total": 2859,
                "createdAt": "2021-04-21T12:50:22.457Z",
                "updatedAt": "2021-04-21T12:50:22.457Z"
            },
            {
                "_id": "60801f8febba426913b33afc",
                "productId": "6000791e268437a806a8c0dd",
                "quantity": 1,
                "price": 3710.004,
                "supplier": "TS Plus",
                "supplierId": "5f8ec4896b08c33fc9f169dd",
                "itemFullName": "wine Charles-Heidsieck brut rose Charles-Heidsieck, Vintage Rose 2005 0.75 FRANCE",
                "itemName": "Charles-Heidsieck, Vintage Rose 2005",
                "country": "FRANCE",
                "countryId": "1ca8816a-a7db-4be0-bc16-2d6e532b8b53",
                "total": 3710,
                "createdAt": "2021-04-21T12:50:23.383Z",
                "updatedAt": "2021-04-21T12:50:23.383Z"
            },
            {
                "_id": "60801f8febba426913b33afd",
                "productId": "6000791e268437a806a8c0e1",
                "quantity": 1,
                "price": 3000,
                "supplier": "TS Plus",
                "supplierId": "5f8ec4896b08c33fc9f169dd",
                "itemFullName": "wine PIPER-HEIDSIECK brut white Piper-Heidsieck, Brut Non Vintage (gift box Off Trade) 1.5 FRANCE",
                "itemName": "Piper-Heidsieck, Brut Non Vintage (gift box Off Trade)",
                "country": "FRANCE",
                "countryId": "1ca8816a-a7db-4be0-bc16-2d6e532b8b53",
                "total": 3000,
                "createdAt": "2021-04-21T12:50:23.714Z",
                "updatedAt": "2021-04-21T12:50:23.714Z"
            },
            {
                "_id": "60801f90ebba426913b33afe",
                "productId": "6000791e268437a806a8c0df",
                "quantity": 1,
                "price": 5904.996,
                "supplier": "TS Plus",
                "supplierId": "5f8ec4896b08c33fc9f169dd",
                "itemFullName": "wine Charles-Heidsieck brut white Charles-Heidsieck, Blanc de Millenaires 2004 (gift box) 0.75 FRANCE",
                "itemName": "Charles-Heidsieck, Blanc de Millenaires 2004 (gift box)",
                "country": "FRANCE",
                "countryId": "1ca8816a-a7db-4be0-bc16-2d6e532b8b53",
                "total": 5904,
                "createdAt": "2021-04-21T12:50:24.345Z",
                "updatedAt": "2021-04-21T12:50:24.345Z"
            },
            {
                "_id": "60801f90ebba426913b33aff",
                "productId": "6000791e268437a806a8c0db",
                "quantity": 1,
                "price": 5405.004,
                "supplier": "TS Plus",
                "supplierId": "5f8ec4896b08c33fc9f169dd",
                "itemFullName": "wine Charles-Heidsieck brut white Charles-Heidsieck, Blanc de Millenaires 2004 0.75 FRANCE",
                "itemName": "Charles-Heidsieck, Blanc de Millenaires 2004",
                "country": "FRANCE",
                "countryId": "1ca8816a-a7db-4be0-bc16-2d6e532b8b53",
                "total": 5405,
                "createdAt": "2021-04-21T12:50:24.859Z",
                "updatedAt": "2021-04-21T12:50:24.859Z"
            },
            {
                "_id": "60801f91ebba426913b33b00",
                "productId": "6000791e268437a806a8c0ed",
                "quantity": 1,
                "price": 527.496,
                "supplier": "TS Plus",
                "supplierId": "5f8ec4896b08c33fc9f169dd",
                "itemFullName": "wine ACKERMAN brut white Ackerman, Cremant de Loire Blanc de Noir 0.75 FRANCE",
                "itemName": "Ackerman, Cremant de Loire Blanc de Noir",
                "country": "FRANCE",
                "countryId": "1ca8816a-a7db-4be0-bc16-2d6e532b8b53",
                "total": 527,
                "createdAt": "2021-04-21T12:50:25.904Z",
                "updatedAt": "2021-04-21T12:50:25.904Z"
            },
            {
                "_id": "60801f92ebba426913b33b01",
                "productId": "6000791e268437a806a8c0ef",
                "quantity": 1,
                "price": 965.0039999999999,
                "supplier": "TPlus",
                "supplierId": "5f8ec4896b08c33fc9f169dd",
                "itemFullName": "wine OENOWINIS brut white Hubert Favier, Brut Rose 0.75 FRANCE",
                "itemName": "Hubert Favier, Brut Rose",
                "country": "FRANCE",
                "countryId": "1ca8816a-a7db-4be0-bc16-2d6e532b8b53",
                "total": 965,
                "createdAt": "2021-04-21T12:50:26.165Z",
                "updatedAt": "2021-04-21T12:50:26.165Z"
            },
            {
                "_id": "60801f93ebba426913b33b02",
                "productId": "6000791e268437a806a8c0fd",
                "quantity": 1,
                "price": 579.996,
                "supplier": "TS Plus",
                "supplierId": "5f8ec4896b08c33fc9f169dd",
                "itemFullName": "wine FERRARI brut white Ferrari Maximum Brut 0,375l 0.375 ITALY",
                "itemName": "Ferrari Maximum Brut 0,375l",
                "country": "ITALY",
                "countryId": "9d1428c6-bb6b-4c94-89e1-5d2e77da3286",
                "total": 579,
                "createdAt": "2021-04-21T12:50:27.469Z",
                "updatedAt": "2021-04-21T12:50:27.469Z"
            },
            {
                "_id": "60801f93ebba426913b33b03",
                "productId": "6000791e268437a806a8c0ff",
                "quantity": 1,
                "price": 1080.504,
                "supplier": "TPlus",
                "supplierId": "5f8ec4896b08c33fc9f169dd",
                "itemFullName": "wine FERRARI brut rose Ferrari Rose Brut (g/b) 0.75 ITALY",
                "itemName": "Ferrari Rose Brut (g/b)",
                "country": "ITALY",
                "countryId": "9d1428c6-bb6b-4c94-89e1-5d2e77da3286",
                "total": 1080,
                "createdAt": "2021-04-21T12:50:27.890Z",
                "updatedAt": "2021-04-21T12:50:27.890Z"
            }
        ],
        "createdAt": "2021-04-21T12:50:38.577Z",
        "updatedAt": "2021-04-21T12:50:38.577Z",
        "_id": 10032,
        "__v": 0
    }
}



function getOrderInfo() {
    //Конвертирует дату. Но можно было бы и просто обрезать строку с конца и заменить разделитель
    function getOrderDate() {
        let orderDate = orderObj.order.createdAt
        let date = parseISOString(orderDate)

        function parseISOString(s) {
            let b = s.split(/\D+/);
            return new Date(Date.UTC(b[0], --b[1], b[2], b[3], b[4], b[5], b[6]));
        }

        function isoFormatDMY(d) {
            function pad(n) {
                return (n < 10 ? '0' : '') + n
            }
            return pad(d.getUTCDate()) + '.' + pad(d.getUTCMonth() + 1) + '.' + d.getUTCFullYear() + ' ' + d.getUTCHours() + ':' + d.getMinutes() + ':' + d.getSeconds();
        }





        let parentElem = document.querySelector('.order-info')
        console.log(parentElem)
        parentElem.insertAdjacentHTML('afterbegin', `<p class="order-number">Заявка № ${orderObj.order._id}</p><p class="order-date">${isoFormatDMY(date)}</p>`)

    }
    getOrderDate()
    //Создаёт массив с нужными ключами
    let obj = []

    function arrCreate() {
        let orderItems = orderObj.order.orderItems
        for (let n = 0; n < orderItems.length; n++) {
            obj[n] = {
                'supplier': orderItems[n]['supplier'],
                'total': Math.floor(orderItems[n]['total']),
                'quantity': orderItems[n]['quantity']
            }
        }
    }
    arrCreate()

    //Добавляет пробел после тысяч
    function sumSpace(num) {
        num = num.toFixed(2)
        return Math.floor(num).toLocaleString();
    }

    //Создаёт объекты ключ(имя поставщика): сумма товаров или количество товаров, вставляет в html строку.
    function suppliersTotal() {
        let supTotal = obj.reverse().reduce((a, c) => (a[c.supplier] = (a[c.supplier] || 0) + c.total, a), {})
        let quant = obj.reduce((a, c) => (a[c.supplier] = (a[c.supplier] || 0) + c.quantity, a), {})

        for (let key in supTotal, quant) {
            let parentElem = document.querySelector('.suppliers')
            parentElem.insertAdjacentHTML('afterbegin', `<p class="supplier-name">${key}</p><p class="goods-quantity">${quant[key]} товаров</p><p class="total-price">${sumSpace(supTotal[key])} грн</p>`)
        }
    }
    suppliersTotal()

    let parentElemSubTotal = document.querySelector('.subtotals')
    parentElemSubTotal.insertAdjacentHTML('afterbegin', `<p class="total-sum-txt">Сумма заказа</p><p class="total-sum">${sumSpace(Math.floor(orderObj.order.totalPrice))} грн</p>`)

    //К этому нужно функцию вычета процента скидки
    let parentElemTotalSum = document.querySelector('.total')
    parentElemTotalSum.insertAdjacentHTML('afterbegin', `<p class="total-price-txt">Всего:</p><p class="total-all">${sumSpace(Math.floor(orderObj.order.totalPrice))} грн</p>`)

    function socialLinks() {
        let socialIcons = {
            '1': 'build/img/Frame (1).png',
            '2': 'build/img/Frame (2).png',
            '3': 'build/img/Frame (3).png',
            '4': 'build/img/Frame (4).png',
            '5': 'build/img/Frame (5).png'

        }
        let parentElem = document.querySelector('.order-card')
        parentElem.insertAdjacentHTML('beforebegin', `
<div class="social-links">
<a href="" class="social-link"><img src="${socialIcons[1]}" alt="telegram"></a>
<a href="" class="social-link"><img src="${socialIcons[2]}" alt="facebook"></a>
<a href="" class="social-link"><img src="${socialIcons[3]}" alt="viber"></a>
<a href="" class="social-link"><img src="${socialIcons[4]}" alt="gmail"></a>
<a href="" class="print-link"><img class="print" src="${socialIcons[5]}" alt="print"></a>
</div>`)


    }
    socialLinks()
}
getOrderInfo()